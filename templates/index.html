<!DOCTYPE html>
<html>
	<head>
		<title>Leaderboard</title>
		<link rel="stylesheet" href="/static/css/reset.css?q=1280549780" type="text/css" media="screen" charset="utf-8" />
		<link href="{{ url_for('static', filename='style.css') }}?q=123" type="text/css" rel="stylesheet">
	</head>
	<body>
		<h1 class="header">Leaderboard</h1>
		<a href="/newplayer">Add a new player</a>
		<br />
		<a href="/newkill">Add a kill</a>
		<table id = "players" class="board">
			<tr id="table-head">
				<th onclick="sortTable(0)">Player</th>
				<th onclick="sortTable(1)">Code</th>
				<th onclick="sortTable(2)">Kills</th>
				<th onclick="sortTable(3)">Status</th>
			</tr>
			{% for x in players %}
				<div id="{{x[0]}}}">
					<tr class="player">
						<td>{{x[3]}}</td>
						<td>{{x[0]}}</td>
						<td>{{x[1]}}</td>
						<td class="{% if x[2] == 1 %}alive{% else %}dead{% endif %}">{% if x[2] == 1 %}Alive{% else %}Dead{% endif %}</td>
					</tr>
				</div>
			{% endfor %}
			<script>
				/*Stolen from w3 schools*/
				function sortTable(n) {
					var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
					table = document.getElementById("players");
					switching = true;
					// Set the sorting direction to ascending:
					dir = "asc"; 
					/* Make a loop that will continue until
					no switching has been done: */
					while (switching) {
						// Start by saying: no switching is done:
						switching = false;
						rows = table.rows;
						/* Loop through all table rows (except the
						first, which contains table headers): */
						for (i = 1; i < (rows.length - 1); i++) {
						// Start by saying there should be no switching:
						shouldSwitch = false;
						/* Get the two elements you want to compare,
						one from current row and one from the next: */
						x = rows[i].getElementsByTagName("TD")[n];
						y = rows[i + 1].getElementsByTagName("TD")[n];
						/* Check if the two rows should switch place,
						based on the direction, asc or desc: */
						if (dir == "asc") {
							if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
							// If so, mark as a switch and break the loop:
							shouldSwitch = true;
							break;
							}
						} else if (dir == "desc") {
							if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
							// If so, mark as a switch and break the loop:
							shouldSwitch = true;
							break;
							}
						}
						}
						if (shouldSwitch) {
						/* If a switch has been marked, make the switch
						and mark that a switch has been done: */
						rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
						switching = true;
						// Each time a switch is done, increase this count by 1:
						switchcount ++; 
						} else {
						/* If no switching has been done AND the direction is "asc",
						set the direction to "desc" and run the while loop again. */
						if (switchcount == 0 && dir == "asc") {
							dir = "desc";
							switching = true;
						}
						}
					}
					}
			</script>
	</body>
</html>